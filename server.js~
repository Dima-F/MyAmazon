var express = require('express');
var morgan = require('morgan');
var bodyParser = require('body-parser');
var config = require('./config');
var User = require('./models/user');
var myMongoose = require('./libs/mongoose');
var app = express();


app.use(morgan('dev'));
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({
  extended:true
}));

app.post('/create-user',function(req,res,next){
  var user = new User();
  user.profile.name = req.body.name;
  user.password = req.body.password;
  user.email = req.body.email;

  user.save(function(err){
    if(err) next(err);
    res.json('Succesfully created new user!');
  });
});

app.listen(config.get('port'),function(err){
  if(err) throw err;
  console.log('Server running on port '+config.get('port'));
});
